<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AsteroidWorks.Inc</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            font-family: 'Courier New', Courier, monospace;
            color: white;
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none; /* Let clicks pass through to 3D scene */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 2rem;
            box-sizing: border-box;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 2rem; /* Add spacing for views */
            pointer-events: auto;
        }

        h1 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            cursor: pointer;
        }

        nav a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            margin-left: 2rem;
            font-size: 0.9rem;
            transition: color 0.3s;
            cursor: pointer;
        }

        nav a:hover {
            color: #0ff;
            text-shadow: 0 0 5px #0ff;
        }

        /* View Management */
        .view-section {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        /* Hero / Home Styles */
        .hero {
            max-width: 600px;
        }

        .hero h2 {
            font-size: 4rem;
            line-height: 0.9;
            margin: 0 0 1rem 0;
            mix-blend-mode: overlay;
        }

        .hero p {
            font-size: 1.1rem;
            line-height: 1.5;
            color: #aaa;
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem;
            border-left: 2px solid #0ff;
        }

        /* Mining Page Styles */
        .mining-links {
            list-style: none;
            padding: 0;
            margin: 2rem 0;
            pointer-events: auto;
        }
        
        .mining-links li {
            margin-bottom: 1rem;
        }

        .mining-links a {
            font-size: 1.5rem;
            color: #0ff;
            text-decoration: none;
            display: inline-block;
            transition: transform 0.2s, text-shadow 0.2s;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            width: 100%;
            max-width: 400px;
            padding: 0.5rem 0;
        }

        .mining-links a:hover {
            transform: translateX(20px);
            text-shadow: 0 0 10px #0ff;
            border-bottom-color: #0ff;
        }

        /* REMOVED: All Tycoon Game Styles */

        .status-bar {
            display: flex;
            gap: 2rem;
            font-size: 0.8rem;
            color: #666;
            margin-top: auto;
        }

        .status-item span {
            color: #0ff;
        }
    </style>
</head>
<body>

    <!-- 3D Container -->
    <div id="canvas-container"></div>

    <!-- UI Overlay -->
    <div id="ui-layer">
        <header>
            <h1 onclick="switchView('home-view')">AsteroidWorks.Inc</h1>
            <nav>
                <a onclick="switchView('mining-view')">Mining</a>
                <a href="#">Revenue</a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSdJGkSP0lKdVWtbc_66BIyzN4WvCJ8THGFT-JEbB2hsVdmBcQ/viewform?usp=preview" target="_blank">Error Reports</a>
                <a onclick="switchView('contact-view')">Contact</a>
            </nav>
        </header>

        <!-- HOME VIEW -->
        <div id="home-view" class="view-section">
            <div class="hero">
                <h2>BUILDING<br>THE BELT.</h2>
                <p>From raw ore extraction to orbital infrastructure, AsteroidWorks provides the foundation for humanity's next giant leap.</p>
            </div>
        </div>

        <!-- MINING VIEW (Hidden by default) -->
        <div id="mining-view" class="view-section" style="display: none;">
            <div class="hero">
                <h2>MINING<br>OPERATIONS.</h2>
                <ul class="mining-links">
                    <li><a href="https://halleybearyoung-coder.github.io/Bouncy-Asteroid/">> BOUNCY ASTEROID</a></li>
                    <li><a href="https://halleybearyoung-coder.github.io/Asteroid.Works.AI/">> ASTEROIDS OF AI</a></li>
                    <li><a href="https://halleybearyoung-coder.github.io/Asteroid_Sweeper/">> </a>ASTEROID SWEEPER</li>
                    <li><a href="#">> MINERAL YIELD ANALYSIS</a></li>
                </ul>
            </div>
        </div>

        <!-- REMOVED: Tycoon View Section -->

        <!-- CONTACT VIEW (Hidden by default) -->
        <div id="contact-view" class="view-section" style="display: none;">
            <div class="hero">
                <h2>SECURE<br>CHANNELS.</h2>
                <ul class="mining-links">
                    <li><a href="mailto:halleybearyoung@gmail.com">> halleybearyoung@gmail.com</a></li>
                </ul>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-item">SYSTEM: <span>ONLINE</span></div>
            <div class="status-item">SECTOR: <span>7G-ALPHA</span></div>
            <div class="status-item">YIELD: <span>98.4%</span></div>
        </div>
    </div>

    <!-- Three.js Logic -->
    <script type="module">
        import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js';

        // REMOVED: All Game State and Game Logic functions

        // --- Navigation Logic ---
        window.switchView = function(viewId) {
            // Hide all view sections
            document.querySelectorAll('.view-section').forEach(el => {
                el.style.display = 'none';
            });
            // Show the selected one
            const target = document.getElementById(viewId);
            if(target) {
                target.style.display = 'flex'; // Restore flex display
            }
        };

        // 1. Scene Setup
        const scene = new THREE.Scene();
        // Add subtle fog for depth
        scene.fog = new THREE.FogExp2(0x050505, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // 2. Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 2); // Soft white light
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0x00ffff, 2, 50); // Cyan mining light
        pointLight.position.set(5, 5, 5);
        scene.add(pointLight);

        const sunLight = new THREE.DirectionalLight(0xffffff, 1.5);
        sunLight.position.set(-5, 3, 5);
        scene.add(sunLight);

        // --- Helper: Create Procedural Rock Texture ---
        function createRockTexture() {
            const size = 512;
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');

            // 1. Base Noise
            ctx.fillStyle = '#555'; // Base grey
            ctx.fillRect(0, 0, size, size);

            // 2. Grainy Noise (Sand/Dust)
            for (let i = 0; i < 100000; i++) {
                const x = Math.random() * size;
                const y = Math.random() * size;
                const shade = Math.random() > 0.5 ? '#777' : '#333';
                ctx.fillStyle = shade;
                ctx.globalAlpha = 0.15;
                ctx.fillRect(x, y, 2, 2);
            }
            
            // 3. Larger Splotches (Mineral deposits)
            for (let i = 0; i < 200; i++) {
                const x = Math.random() * size;
                const y = Math.random() * size;
                const r = Math.random() * 20;
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fillStyle = Math.random() > 0.5 ? '#000' : '#fff';
                ctx.globalAlpha = 0.05;
                ctx.fill();
            }

            const texture = new THREE.CanvasTexture(canvas);
            return texture;
        }

        const rockTexture = createRockTexture();


        // 3. The Asteroid (Procedural)
        // Switched to high-res SphereGeometry (256 segments) for maximum smoothness
        const geometry = new THREE.SphereGeometry(2, 256, 256); 
        
        const positionAttribute = geometry.attributes.position;
        const vertex = new THREE.Vector3();
        
        // Define random impact craters
        const craters = [];
        
        // 1. Large "Hero" Craters
        for(let k = 0; k < 5; k++) {
            const center = new THREE.Vector3(
                (Math.random() - 0.5) * 2, 
                (Math.random() - 0.5) * 2, 
                (Math.random() - 0.5) * 2
            ).normalize();
            craters.push({
                center: center,
                radius: 0.3 + Math.random() * 0.2, 
                depth: 0.1 + Math.random() * 0.1,
                hasRim: Math.random() > 0.5 // 50% chance of a rim
            });
        }

        // 2. Small "Micro" Craters (The requested bunch)
        for(let k = 0; k < 80; k++) {
            const center = new THREE.Vector3(
                (Math.random() - 0.5) * 2, 
                (Math.random() - 0.5) * 2, 
                (Math.random() - 0.5) * 2
            ).normalize();
            craters.push({
                center: center,
                radius: 0.05 + Math.random() * 0.1, // Small but spans enough vertices
                depth: 0.02 + Math.random() * 0.03,  // Visible indent
                hasRim: Math.random() > 0.7 // 30% chance of a rim
            });
        }

        for (let i = 0; i < positionAttribute.count; i++) {
            vertex.fromBufferAttribute(positionAttribute, i);
            
            const v = vertex.clone().normalize();
            
            // 1. Shape Noise (Low Frequency)
            let distortion = 0;
            distortion += Math.sin(v.x * 2.1 + 0.5) * 0.5; 
            distortion += Math.cos(v.y * 1.8 + 1.2) * 0.5;
            distortion += Math.sin(v.z * 2.5 + 2.0) * 0.5;

            // 2. Surface Noise (High Frequency)
            // Lowered frequency and amplitude to remove "jagged" look
            distortion += Math.sin(v.x * 4) * 0.03;
            distortion += Math.cos(v.y * 4) * 0.03;
            distortion += Math.sin(v.z * 4) * 0.03;

            // 3. Apply Craters
            for (let k = 0; k < craters.length; k++) {
                const crater = craters[k];
                const dist = v.distanceTo(crater.center); // Distance on sphere surface

                if (dist < crater.radius) {
                    // Normalized distance from center (0 to 1)
                    const x = dist / crater.radius;
                    
                    // Create a smooth bowl shape using Cosine
                    // At center (x=0), val=1. At edge (x=1), val=0.
                    const cavity = Math.pow(Math.cos(x * Math.PI * 0.5), 2.5); 
                    
                    // Dig the hole
                    distortion -= cavity * crater.depth * 3.5;

                    // Conditional Rim: Only add the "lump" if this crater has one
                    if (crater.hasRim) {
                        const rim = Math.sin(x * Math.PI) * crater.depth * 2.0;
                        if (rim > 0) distortion += rim;
                    }
                }
            }
            
            // Apply distortion to radius
            const radius = 2.0 + distortion * 0.6;
            
            vertex.normalize().multiplyScalar(radius);
            
            positionAttribute.setXYZ(i, vertex.x, vertex.y, vertex.z);
        }
        
        geometry.computeVertexNormals();

        const material = new THREE.MeshStandardMaterial({
            color: 0x888888,     // Lighter base to let texture show
            map: rockTexture,    // Apply the texture
            bumpMap: rockTexture,// Use texture for bumpiness
            bumpScale: 0.15,     // Strength of the surface grit
            roughness: 0.9,
            metalness: 0.2,
            flatShading: false
        });

        const asteroid = new THREE.Mesh(geometry, material);
        scene.add(asteroid);

        // 4. Starfield
        const starsGeometry = new THREE.BufferGeometry();
        const starsCount = 2000;
        const posArray = new Float32Array(starsCount * 3);

        for(let i = 0; i < starsCount * 3; i++) {
            // Spread stars far out
            posArray[i] = (Math.random() - 0.5) * 50; 
        }

        starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starsMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: 0xffffff,
            transparent: true,
            opacity: 0.8
        });
        const starMesh = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(starMesh);

        // 5. Interaction variables
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;
        // REMOVED: Raycaster Logic

        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        });

        // 6. Animation Loop
        function animate() {
            requestAnimationFrame(animate);

            // Rotate asteroid
            asteroid.rotation.y += 0.002;
            asteroid.rotation.x += 0.001;

            // Rotate stars slowly
            starMesh.rotation.y -= 0.0002;

            // Parallax mouse effect
            targetX = mouseX * 0.001;
            targetY = mouseY * 0.001;

            asteroid.rotation.y += 0.05 * (targetX - asteroid.rotation.y);
            asteroid.rotation.x += 0.05 * (targetY - asteroid.rotation.x);

            renderer.render(scene, camera);
        }

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
